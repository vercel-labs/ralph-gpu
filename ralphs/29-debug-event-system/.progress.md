# Progress

## Completed
- [x] Create /Users/matiasgf/repos/experiments/ralph-gpu/packages/core/src/events.ts
- [x] Define base GPUEvent interface with: type, timestamp (performance.now()), id (unique)
- [x] Define DrawEvent with: source ("pass"|"material"|"particles"), label?, vertexCount, instanceCount, topology, target ("screen"|"texture"), targetSize [w,h]
- [x] Define ComputeEvent with: label?, workgroups [x,y,z], workgroupSize [x,y,z], totalInvocations
- [x] Define ShaderCompileEvent with: shaderType ("vertex"|"fragment"|"compute"), label?, sourceLines, warnings[], errors[], compilationTime?
- [x] Define MemoryEvent with: resourceType ("buffer"|"texture"|"sampler"), label?, size (bytes), usage, action ("allocate"|"free"|"resize")
- [x] Define TargetEvent with: target ("screen"|"texture"|"mrt"), label?, size [w,h], format?, action ("set"|"clear"|"resize")
- [x] Define PipelineEvent with: pipelineType ("render"|"compute"), label?, format?, cacheHit boolean
- [x] Define FrameEvent with: frameNumber, deltaTime, time
- [x] Define GPUTimingEvent with: label, gpuTime (ms), cpuTime (ms)
- [x] Export union type RalphGPUEvent of all event types
- [x] Export EventType union of all type strings
- [x] Create /Users/matiasgf/repos/experiments/ralph-gpu/packages/core/src/event-emitter.ts
- [x] Constructor takes options: { types?: string[], historySize?: number }
- [x] Implement on(type, listener) - subscribe to specific event type
- [x] Implement off(type, listener) - unsubscribe
- [x] Implement once(type, listener) - subscribe for single event
- [x] Implement onAll(listener) - subscribe to all events
- [x] Implement emit(event) - emit event (internal, checks type filter)
- [x] Implement getHistory(filter?) - query event history with optional type filter
- [x] Implement clearHistory() - clear history
- [x] Use circular buffer (array with max size) for history
- [x] Filter at emit time based on configured types (performance)
- [x] Add to GPUContextOptions in /Users/matiasgf/repos/experiments/ralph-gpu/packages/core/src/types.ts
- [x] Import EventEmitter in context.ts
- [x] Add private eventEmitter?: EventEmitter field (only created if events.enabled)
- [x] Initialize EventEmitter in constructor if options.events?.enabled is true
- [x] Add public on(type, listener) method - delegates to eventEmitter
- [x] Add public off(type, listener) method - delegates to eventEmitter
- [x] Add public once(type, listener) method - delegates to eventEmitter
- [x] Add public onAll(listener) method - delegates to eventEmitter
- [x] Add public getEventHistory(filter?) method - delegates to eventEmitter
- [x] Add private emitEvent(event) helper - only emits if eventEmitter exists
- [x] Emit frame:start in beginFrame() method (updated to FrameEvent with phase: "start")
- [x] Emit frame:end in endFrame() method (updated to FrameEvent with phase: "end")
- [x] Clean up eventEmitter in dispose()

## In Progress
- [ ] Export all event types from events.ts

## Next
- [ ] Export EventEmitter class (for advanced users)

## Blockers
- None
